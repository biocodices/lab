<div class="header">
  <div class="title">
    <h1>
      <%= fa_icon 'braille' %>
      Libraries
    </h1>
  </div>
  <div class="actions">
    <%= link_to 'Build a new library', new_library_path, class: 'btn btn-default' %>
  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Project</th>
      <th>N DNA extractions</th>
      <th>Used in these<br>sequencings</th>
      <th>Laboratory</th>
    </tr>
  </thead>

  <tbody>
    <% @libraries.decorate.each do |library| %>
        <!-- Main row -->
        <tr class="display-row collapsed" data-toggle="collapse" data-target="#detail-<%= library.id %>" class="accordion-toggle">
          <td><%= library.id %></td>
          <td class="project-tag">
            <%= safe_join(library.projects.decorate.map(&:tag).uniq, ', ') %>
          </td>
          <td><%= library.dna_extractions.count %></td>
          <td><%= library.sequencings.map(&:id).uniq.join(', ') %></td>
          <td><%= library.laboratory %></td>
        </tr>

        <!-- Details box -->
        <tr class="hidden-row">
          <td colspan="5">
            <div class="accordion-body collapse" id="detail-<%= library.id %>">
              <div class="padding">

                <%= render library %>

              </div><!-- .padding -->
            </div><!-- .accordion-body -->
          </td>
        </tr>

    <% end %>
  </tbody>
</table>
