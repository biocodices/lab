<p id="notice"><%= notice %></p>

<h1>
  Samples
  <%= link_to 'Create a new sample', new_sample_path, class: "btn btn-default" %>
</h1>

<div class="row">
  <div class="col-sm-12">

    <table class='table table-striped table-condensed'>
      <thead>
        <tr>
          <th>Project</th>
          <th>ID</th>
          <th>Patient</th>
          <th>Extractions</th>
          <th>Institution</th>
          <th>Request date</th>
          <th>Admission date</th>
          <th>Request category</th>
        </tr>
      </thead>

      <tbody>
        <% @samples.each do |sample| %>

          <!-- Main row -->
          <tr class="display-row collapsed" data-toggle="collapse" data-target="#detail-<%= sample.id %>" class="accordion-toggle">
            <td>
              <%= link_to project_path(sample.project) do %>
                <%= sample.project.decorate.tag %>
              <% end %>
            </td>
            <td><%= sample.id %></td>
            <td><%= sample.patient.full_name %></td>
            <td><%= safe_join(sample.dna_samples.map{ fa_icon "flask", class: ["grey", "small"] }) %></td>
            <td><%= sample.institution %></td>
            <td><%= sample.request_date && sample.admission_date.strftime("%-d %b") %></td>
            <td><%= sample.admission_date && sample.admission_date.strftime("%-d %b") %></td>
            <td><%= sample.request_category %></td>
          </tr>

          <!-- Details row -->
          <tr class="hidden-row">
            <td colspan="8">
              <div class="accordion-body collapse" id="detail-<%= sample.id %>">
                <div class="padding">

                  <%= render sample %>

                </div><!-- .padding -->
              </div><!-- accordion-body -->
            </td>
          </tr>

        <% end %>
      </tbody>
    </table>

  </div><!-- .col-sm-12 -->
</div><!-- .row -->
